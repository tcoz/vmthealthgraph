<html>
<head>

    <script src="js/libs/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">

        window.onload = function ( ) {

            // Math.log ( 22026.4657948067 ) = 10

            /*
            To get 10 vals of 1 - 20000:
            for ( var i = 0; i < 10; i++ ) {
                console.log ( Math.floor ( Math.pow ( 10, ( i * 0.477893 ) ) ) );
            }
            */

            var data = JSON.parse ( '[{"vm":"Fedora-1","priceindex":"1","uuid":"423f5341-96cd-74ee-431a-7d9620745d98","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Win2003-Web_Clone-7","priceindex":"1","uuid":"423fe490-77a7-1146-d486-6c0ede393eb2","host":"hp-esx27.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"Win2003-Web_Clone-3","priceindex":"1","uuid":"423f00e6-be5b-303d-324d-5e31b92f3991","host":"hp-esx28.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"vmturbo64.x86_64-3.0.0[BEN]","priceindex":"1","uuid":"423f85ee-1739-ba6b-47a4-f4496cb79748","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"SUSE-2_Clone","priceindex":"1","uuid":"423fcacf-7969-1392-5d6c-1495fc591f96","host":"hp-esx22.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"TLOSS2Alec","priceindex":"1","uuid":"423f2112-d7ca-5056-47f0-10d8a8b1abe9","host":"hp-esx22.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"Fedora-4","priceindex":"1","uuid":"423f9b46-36cb-a1be-fecb-1d3e74cd2822","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"Win2003-1","priceindex":"1","uuid":"4238a643-cb51-a284-dab5-19430fab8b1e","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Ubuntu","priceindex":"1","uuid":"4223ddc8-35e5-0886-b078-ff6d0f195922","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"виртуальная машина","priceindex":"1","uuid":"423f6efb-ddd1-df62-93da-8ccfc2730e83","host":"hp-esx27.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"NixOS [DO NOT TOUCH]","priceindex":"1","uuid":"423f515d-38f2-5621-8309-78ed0168415f","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"વર્ચ્યુઅલ મશીન","priceindex":"1","uuid":"423fc509-6592-8ba0-0c65-a7bbb3a0cb9b","host":"hp-esx28.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Win2003-Web_Clone-6","priceindex":"1","uuid":"423f49e1-4c5d-9eb5-4b5a-210107b60779","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Fedora-1_Clone","priceindex":"1","uuid":"423faad4-8850-ddff-63e5-5025616493bb","host":"hp-esx29.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"מכונה וירטואלית","priceindex":"1","uuid":"423fb16b-496d-8a06-fa75-a50cb8c8926c","host":"hp-esx27.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"virtuális gép","priceindex":"1","uuid":"423f3ce6-2f22-3b57-e9f8-93223dd5dac8","host":"hp-esx28.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"Win2003-Web","priceindex":"1","uuid":"423fdbd1-1d9b-8fac-e0d1-77962b957e2a","host":"hp-esx26.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Aditya_DB_test","priceindex":"1","uuid":"423fe811-36a6-5c46-3802-d70749730f35","host":"hp-esx21.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"Ubuntu_Minimal_1","priceindex":"1","uuid":"423f8b64-101a-1b0b-2ee8-49c4186375d4","host":"hp-esx27.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"SUSE-One","priceindex":"1","uuid":"423feb8c-5ec7-3572-b43a-6bdf40be7df9","host":"hp-esx26.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS2","dspriceindex":"1.06"},{"vm":"Win2003-Web_Clone-10","priceindex":"1","uuid":"423fa768-aa0d-11ca-e8a9-d03aa9300547","host":"hp-esx27.corp.vmturbo.com","hostpriceindex":"1","ds":"NFSShare","dspriceindex":"1.02"},{"vm":"SUSE-3","priceindex":"1","uuid":"423f1657-16ec-ddaf-eb0b-f00e7eaa9924","host":"hp-esx22.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Win2003-Web_Clone-2","priceindex":"1","uuid":"423f4448-245e-1b23-24d4-308b3ee575c3","host":"hp-esx23.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"SUSE13-4 [DO NOT TOUCH]_nerati-controller","priceindex":"1","uuid":"420eec49-1c8d-00cc-9c8d-0b94094c9aa7","host":"hp-esx22.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"SUSE-2","priceindex":"1","uuid":"423f0e2c-cdf8-8727-0650-0a723ae634da","host":"hp-esx24.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"},{"vm":"Windows XP Professional SP3","priceindex":"1","uuid":"423fa326-fbcc-4a22-1ff8-5d2c1bf7e1ee","host":"hp-esx22.corp.vmturbo.com","hostpriceindex":"1","ds":"Quantastor584:ESXDC3DS1","dspriceindex":"1.58"}]' );

            var i, j,
                chart_layer1 = jQuery ( '#chart_layer1' ).get ( 0 ),
                chart_layer1_context = chart_layer1.getContext ( '2d'),
                powVals = [ ], originPoint = { },
                xPoint, yPoint, axisLength = 500;

            originPoint = { 'x' : 100, 'y' : chart_layer1.height - 100 };

            powVals.push ( 0 );

            for ( i = 0; i < 10; i++ ) {
                powVals.push ( Math.floor ( Math.pow ( 10, ( i * 0.477893 ) ) ) );
            }

            chart_layer1_context.strokeStyle = '#000000';

            chart_layer1_context.beginPath ( );
            chart_layer1_context.moveTo ( originPoint.x, originPoint.y  );
            chart_layer1_context.lineTo ( originPoint.x + axisLength, originPoint.y );
            chart_layer1_context.stroke ( );

            chart_layer1_context.beginPath ( );
            chart_layer1_context.moveTo ( originPoint.x, originPoint.y  );
            chart_layer1_context.lineTo ( originPoint.x, originPoint.y - axisLength );
            chart_layer1_context.stroke ( );

            chart_layer1_context.font = 'bold 14px sans-serif';
            chart_layer1_context.fillStyle = '#000000';
            chart_layer1_context.fillText ( 'DS UI', 10, 300 );
            chart_layer1_context.fillText ( 'HOST UI', 295, 570 );

            chart_layer1_context.font = '10px sans-serif';

            for ( i = 0; i < powVals.length; i++ ) {

                xPoint = originPoint.x + ( i * ( axisLength / 10 ) );
                yPoint = originPoint.y - ( i * ( axisLength / 10 ) );

                chart_layer1_context.fillText ( powVals [ i ].toString ( ), xPoint, originPoint.y + 15 );
                chart_layer1_context.fillText ( powVals [ i ].toString ( ), originPoint.x - 40, yPoint );

                chart_layer1_context.strokeStyle = '#666666';
                chart_layer1_context.beginPath ( );
                chart_layer1_context.moveTo ( xPoint, originPoint.y );
                chart_layer1_context.lineTo ( xPoint, originPoint.y - axisLength );
                chart_layer1_context.stroke ( );

                chart_layer1_context.beginPath ( );
                chart_layer1_context.moveTo ( originPoint.x, yPoint );
                chart_layer1_context.lineTo ( originPoint.x + axisLength, yPoint );
                chart_layer1_context.stroke ( );

            }

            for ( i = 0; i < data.length; i++ ) {

                var vmPI = data [ i ].priceindex;
                var hostPI = data [ i ].hostpriceindex;
                var dsPI = data [ i ].dspriceindex;
                var xAxisPoints;
                var yAxisPoints;

                for ( j = 0; j < powVals.length; j++ ) {

                    if ( hostPI >= powVals [ j ] && hostPI < powVals [ j + 1 ] ) {
                        xAxisPoints = [ j, powVals [ j ], powVals [ j + 1 ] ];
                        j = powVals.length;
                    }
                }

                for ( j = 0; j < powVals.length; j++ ) {

                    if ( dsPI >= powVals [ j ] && hostPI < powVals [ j + 1 ] ) {
                        yAxisPoints = [ j, powVals [ j ], powVals [ j + 1 ] ];
                        j = powVals.length;
                    }
                }

                var xPoint = computePoint ( xAxisPoints, hostPI, axisLength );
                var yPoint = computePoint ( yAxisPoints, dsPI, axisLength );

                chart_layer1_context.fillStyle = '#0000FF';
                chart_layer1_context.beginPath();
                chart_layer1_context.arc ( originPoint.x + xPoint, originPoint.y - yPoint, 3, 0, 2 * Math.PI, false );
                chart_layer1_context.fill();
            }
        }

        function computePoint ( arr, point, axisLength ) {

            var totalUnit = axisLength / 10;
            var powValIndex = arr [ 0 ];
            var start = arr [ 1 ];
            var end = arr [ 2 ];
            var totalSpace = axisLength / 10;

            var diff = end - start;
            var unit = totalUnit / diff;
            var plotPoint = diff / point;

            return ( ( powValIndex - 1 )  * 50 ) + ( unit * plotPoint );
        }

    </script>
</head>

<body>

<div id="content"></div>
<canvas id="chart_layer1" width="700" height="625"></canvas>

</body>
</html>